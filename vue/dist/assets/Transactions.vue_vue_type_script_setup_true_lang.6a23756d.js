import{u as $,_ as h}from"./TransactionForm.vue_vue_type_script_setup_true_lang.7ed8fdf4.js";import{d as v,k as S,y as B,l as D,J as M,a as i,z as _,f as b,e as n,w as a,_ as p,i as o,h as s,b as c,F as T,G as x,A as N,Y as L,B as f,$ as O}from"./index.f2ff2e63.js";import{S as P,_ as R,a as A,D as H,b as r,c as V}from"./Alert.vue_vue_type_script_setup_true_lang.f2e9468b.js";import{C as j}from"./Container.467678a6.js";import{a as k}from"./Button.vue_vue_type_script_setup_true_lang.9c374701.js";import{M as z}from"./Modal.5ff461b6.js";const E={key:0},F=b("button",{class:"text-blue-500 hover:underline"}," Edit ",-1),G=["onClick"],W=v({__name:"Transactions",props:{selectDisable:{type:Boolean,default:!1},client:{type:Object},fullHeight:{type:Boolean,default:!0}},setup(m){const w=m,g=L(),e=$(),C=S(["id","client","amount","Transaction date"]),y=d=>{e.pagination.current_page=d,e._getPaginateTransactions()};return B(()=>{e._getPaginateTransactions(),e._getClientList();const{name:d}=g;d==="transactions"&&(e.newTransaction.form.client_id=null)}),D(()=>e.newTransaction.form.client_id,d=>{var t;const{name:l}=g,{id:u}=(t=w.client)!=null?t:{};l==="client"&&!d&&u&&(e.newTransaction.form.client_id=u)}),(d,l)=>{const u=M("RouterLink");return i(),_(T,null,[b("div",{class:N(m.fullHeight?"h-full":"")},[n(j,null,{default:a(()=>[n(p,{justify:"between",class:"mb-4"},{default:a(()=>[n(P,null,{default:a(()=>[o("Transactions")]),_:1}),n(k,{onClick:l[0]||(l[0]=t=>s(e).newTransaction.isModalOpen=!0)},{default:a(()=>[o("Add Transaction")]),_:1})]),_:1}),s(e).loading?(i(),c(V,{key:1})):(i(),_("div",E,[s(e).transactions.length>0?(i(),c(R,{key:0,"table-headers":C.value,actions:!0,pagination:s(e).pagination,onOnPageChange:l[1]||(l[1]=t=>y(t))},{default:a(()=>[(i(!0),_(T,null,x(s(e).transactions,t=>(i(),c(H,{key:t.id},{default:a(()=>[n(r,null,{default:a(()=>[o(f(t.id),1)]),_:2},1024),n(r,null,{default:a(()=>[o(f(t.client.firstName+" "+t.client.lastName),1)]),_:2},1024),n(r,null,{default:a(()=>[o(f(t.amount),1)]),_:2},1024),n(r,null,{default:a(()=>[o(f(s(O)(t.transaction_date)),1)]),_:2},1024),n(r,null,{default:a(()=>[n(p,null,{default:a(()=>[n(u,{to:{name:"transaction",params:{id:t.id}}},{default:a(()=>[F]),_:2},1032,["to"]),b("button",{class:"text-red-500 hover:underline ml-2",onClick:J=>s(e)._deleteTransaction(t.id)}," Delete ",8,G)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["table-headers","pagination"])):(i(),c(A,{key:1},{default:a(()=>[o("No transactions")]),_:1}))]))]),_:1})],2),n(z,{"modal-open":s(e).newTransaction.isModalOpen,onCloseModal:l[3]||(l[3]=t=>s(e).newTransaction.isModalOpen=!1)},{modal_header:a(()=>[o(" Add Transaction ")]),default:a(()=>[n(h,{clients:s(e).clientList,onSubmit:l[2]||(l[2]=t=>s(e)._addTransaction()),"select-disable":m.selectDisable},{default:a(()=>[n(p,{class:"mt-8"},{default:a(()=>[n(k,{type:"submit",width:"full",loading:s(e).newTransaction.loading,disable:s(e).disableSubmit},{default:a(()=>[o("Submit")]),_:1},8,["loading","disable"])]),_:1})]),_:1},8,["clients","select-disable"])]),_:1},8,["modal-open"])],64)}}});export{W as _};
